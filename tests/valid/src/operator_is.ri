trait Any { }

struct MyStruct : Any { }

test "operator `is` with traits" {
    let a = Any(MyStruct());
    @assert(a is MyStruct);
}

class Abc {
    field: i32;
}

class Def : Abc { }

fn class_upcast(a: Abc) bool {
    return a is Def;
}

test "operator `is` with classes" {
    let a = Abc();
    @assert(a is Abc);

    let d = Def();
    @assert(class_upcast(d));
}

fn check_field(abc: Abc) bool {
    return if abc is Def as def {
        def.field == 555
    } else {
        false
    };
}

test "operator `is` with variable" {
    let def = Def(555);
    @assert(check_field(def));
}
