fn ret_nil() ?i32 {
    return 3;
}

fn ret_err() !i32 {
    return 3;
}

test "guard expression with mutable variable" {
    if let mut val = ret_nil() {
        @assert(val == 3);
        val += 2;
        @assert(val == 5);
    }
}

test "`if` expression with guard expression" {
    if let val = ret_nil() {
        @assert(val == 3);
    }

    if let val = ret_nil(); val != 3 {
        @assert(false);
    }

    if let val = ret_err() {
        @assert(val == 3);
    }
}

test "`while` expression with guard expression" {
    while let val = ret_nil() {
        @assert(val == 3);
        break;
    }

    while let val = ret_nil(); val == 3 {
        @assert(val == 3);
        break;
    }
}

test "`switch` expression with guard expression" {
    switch let val = ret_nil() {
        3 => @assert(true),
        else => @assert(false)
    }

    switch let val = ret_nil(); val == 3 {
        3 => @assert(true),
        else => @assert(false)
    }

    switch let val = ret_err() {
        3 => @assert(true),
        else => @assert(false)
    }
}
