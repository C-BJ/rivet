struct Option {
    a: ?int32;
}

test "`nil` literal" {
    x: ?int32 := nil;
    @assert(x is nil);
}

test "operator `??`" {
    mut x: ?int32 := nil;
    @assert((x ?? 5) == 5);
    x = 1;
    @assert((x ?? 5) == 1);
}

test "operator `.?`" {
    mut x: ?int32 := 5;
    @assert(x.? == 5);
}

test "guard expr with options" {
    mut x: ?int32 := 100;
    if y := x {
        @assert(y == 100);
    } else {
        @assert(false);
    }
}

test "options field" {
    opt := Option();
    @assert(opt.a is nil);

    opt2 := Option(a: 5);
    @assert(opt2.a !is nil);
    @assert(opt2.a.? == 5);
}
