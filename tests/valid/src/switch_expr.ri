test "`switch` expression" {
    @assert(switch 1 {
        1 => true,
        else => false
    });
}

test "`switch` expression as statement" {
    switch 1 {
        1 => @assert(true),
        else => @assert(false)
    }

    let x = 1;
    switch x {
        1 => @assert(true),
        else => @assert(false)
    }
}

test "`switch` branch condition" {
    let v = 1;
    let x = 5;
    @assert(switch v {
        1 if x == 5 => true,
        else => false
    });
}

class SwitchBase { }
class SwitchSon : SwitchBase {
    name: string;
}

test "`switch` branch variable" {
    let ss = SwitchSon(name: "Rivet");
    let sb = @as(SwitchBase, ss);
    @assert(switch sb is {
        SwitchSon as sb_ss => sb_ss.name == "Rivet",
        else => false
    });
}
